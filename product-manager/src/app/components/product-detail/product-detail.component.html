<!-- <app-product-layout></app-product-layout>
<div class="main d-flex justify-content-center align-items-center mt-4">
  <div class="card shadow-lg border-0 rounded-4" style="max-width: 600px; width: 100%;" *ngIf="product">
    <div class="card-header bg-primary text-white rounded-top-4">
      <h4 class="mb-0 text-center fw-bold">ðŸ“¦ Product Details</h4>
    </div>
    <div class="card-body text-center p-4">

      <div *ngIf="product.imageUrl" class="mb-4">
        <img [src]="product.imageUrl" 
             alt="{{ product.name }}" 
             class="img-fluid rounded shadow-sm" 
             style="max-height: 220px; object-fit: contain;" />
      </div>

      <ul class="list-group list-group-flush text-start">
        <li class="list-group-item d-flex justify-content-between">
          <strong class="text-secondary">Name:</strong>
          <span>{{ product.name }}</span>
        </li>
        <li class="list-group-item d-flex justify-content-between">
          <strong class="text-secondary">Description:</strong>
          <span>{{ product.description || '-' }}</span>
        </li>
        <li class="list-group-item d-flex justify-content-between">
          <strong class="text-secondary">Price:</strong>
          <span class="text-success fw-bold">Rs.{{ product.price }}</span>
        </li>
        <li class="list-group-item d-flex justify-content-between">
          <strong class="text-secondary">Stock Quantity:</strong>
          <span>{{ product.stockQuantity }}</span>
        </li>
        <li class="list-group-item d-flex justify-content-between">
          <strong class="text-secondary">SKU:</strong>
          <span>{{ product.sku || '-' }}</span>
        </li>
        <li class="list-group-item d-flex justify-content-between">
          <strong class="text-secondary">Category:</strong>
          <span>{{ product.category || '-' }}</span>
        </li>
        <li class="list-group-item d-flex justify-content-between">
          <strong class="text-secondary">Active:</strong>
          <span [ngClass]="product.isActive ? 'text-success fw-bold' : 'text-danger fw-bold'">
            {{ product.isActive ? 'Yes' : 'No' }}
          </span>
        </li>
      </ul>
    </div>
  </div>
</div> -->
<app-product-layout></app-product-layout>

<div class="container my-5" *ngIf="product">
  <div class="row g-5">

    <!-- LEFT: Product area (image + details) -->
    <div class="col-lg-8">
      <div class="row g-5 align-items-start">
        <div class="col-md-5">
          <div class="card border-0 bg-transparent">
            <div class="text-center">
              <img [src]="product.imageUrl" [alt]="product.name" class="neutral-image main-image" />
            </div>

            <div class="thumbnail-list justify-content-center mt-3">
              <img *ngIf="product.imageUrl" [src]="product.imageUrl" class="thumb" alt="thumb" />
            </div>
          </div>
        </div>

        <div class="col-md-7">
          <nav aria-label="breadcrumb" class="mb-2">
            <ol class="breadcrumb bg-transparent p-0 small">
              <li class="breadcrumb-item"><a routerLink="/products">Home</a></li>
              <li class="breadcrumb-item"><a routerLink="/products">{{ product.category || 'Products' }}</a></li>
              <li class="breadcrumb-item active" aria-current="page">{{ product.name }}</li>
            </ol>
          </nav>

          <h2 class="fw-bold mb-1">{{ product.name }}</h2>

          <div class="d-flex align-items-center gap-3 mb-3">
            <div class="price-neutral">â‚¹ {{ product.price }}</div>
            <div>
              <span class="badge" [ngClass]="product.isActive ? 'bg-success' : 'bg-danger'">{{ product.isActive ? 'In stock' : 'Unavailable' }}</span>
            </div>
          </div>

          <p class="description-neutral">{{ product.description || 'No description available.' }}</p>

          <hr />

          <div class="info-grid">
            <div>
              <span class="label">SKU</span>
              <span class="value">{{ product.sku || '-' }}</span>
            </div>
            <div>
              <span class="label">Stock</span>
              <span class="value">{{ product.stockQuantity }}</span>
            </div>
          </div>

          <div class="mt-3 d-flex flex-column gap-3">
            <div class="d-flex gap-4 flex-wrap">
              <div>
                <span class="label">Shipping</span>
                <div class="value">Free shipping Â· Delivery in 2-4 days</div>
              </div>
            </div>

            <div class="d-flex align-items-center gap-3">
              <div class="qty-control d-flex align-items-center">
                <button class="btn btn-sm btn-light" (click)="decrementQuantity()" [disabled]="quantity<=1">-</button>
                <input type="number" [(ngModel)]="quantity" min="1" [max]="product.stockQuantity" class="form-control form-control-sm qty-input text-center" />
                <button class="btn btn-sm btn-light" (click)="incrementQuantity()" [disabled]="quantity>=product.stockQuantity">+</button>
              </div>

              <div class="text-muted small">Only {{ product.stockQuantity }} left in stock</div>
            </div>

            <div class="actions">
              <button type="button" class="btn-primary-cta" (click)="addToCart()">Add to Cart</button>
              <button type="button" class="btn-outline" (click)="toggleWishlist()" [disabled]="wishlistLoading">{{ wishlistLoading ? 'Please wait...' : (inWishlist ? 'In Wishlist' : 'Add to Wishlist') }}</button>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- RIGHT: Reviews column -->
    <div class="col-lg-4 reviews-column">
      <div class="card p-3 shadow-sm">
        <h5 class="mb-3">Customer reviews <small class="text-muted">({{ reviews.length }})</small></h5>
        <div class="mb-3 d-flex align-items-center gap-3">
          <div class="display-average">
            <div class="h2 mb-0">{{ averageRating() || 'â€”' }}</div>
            <div class="small text-muted">average</div>
          </div>
          <div class="small text-muted">Based on user feedback</div>
        </div>

        <div class="review-list mb-3">
          <div *ngFor="let r of reviews" class="review-item border rounded p-3 mb-2">
            <div class="d-flex justify-content-between align-items-start mb-1">
              <div>
                <strong>{{ r.author }}</strong>
                <div class="small text-muted">{{ r.date }}</div>
              </div>
              <div class="text-warning">{{ 'â˜…'.repeat(r.rating) + 'â˜†'.repeat(5 - r.rating) }}</div>
            </div>
            <div class="small">{{ r.text }}</div>
          </div>
        </div>

        <hr />

        <h6 class="mb-2">Write a review</h6>
        <div class="mb-2">
          <label class="form-label small">Your name</label>
          <input class="form-control form-control-sm" [(ngModel)]="newReview.author" placeholder="Your name (optional)" />
        </div>
        <div class="mb-2">
          <label class="form-label small">Rating</label>
          <select class="form-select form-select-sm" [(ngModel)]="newReview.rating">
            <option *ngFor="let v of [5,4,3,2,1]" [value]="v">{{ v }} star{{ v>1 ? 's' : '' }}</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label small">Review</label>
          <textarea class="form-control form-control-sm" rows="4" [(ngModel)]="newReview.text"></textarea>
        </div>
        <div class="d-grid">
          <button class="btn btn-primary" (click)="submitReview()">Submit review</button>
        </div>
      </div>
    </div>

  </div>
</div>
